---
title: "Spring 공부 회고"
categories: 
  - blogging
last_modified_at: 2021-01-19T13:00:00+09:00
toc: true
author_profile: true
---

스프링 프레임워크를 공부중
사용할 기술 스택
스프링 + 타임리프 템플릿엔진 + JPA + mariaDB

현재 상태
1. 스프링 써본적 없음 + 주언어 자바 아님
2. 타임리프 같은 템플릿 엔진 써본적 없음
3. 학부 시절 DB 강의 수강 안함

총체적 난국이다. 난리났다.
이번 주에 구현해야할 과제는 하나(사실 둘)
방명록 웹 페이지 구현하기(+ 영화 리뷰 웹페이지 구현)
지금 읽고 있는 책으로 방명록을 구현하는법을 익히려면 200페이지는 읽어야하는 상황. (사실 400페이지)

머리는 "더 이상은 못먹어"라고 말하지만, 책은 "아냐 이것도 먹어봐"라며 스프링, 템플릿엔진, JPA 등 지식을 내 머릿속에 쑤셔 넣어주는중

그런데 여기서 또 하나의 문제는 이 책이 '스프링에 대한 기본적인 지식과 이해가 있는 독자'를 기준으로 작성되었다는것..

앞으로의 여정에서 성장할 내 모습을 기록하기 위해, 베이스캠프 진행 과정과 발생한 이슈를 꾸준히 작성해보려고함.

1/18
아니 그래서 스프링이랑 스프링 부트가 뭔데..
일단 책 예제 따라서 쳐보는중
스프링 어노테이션을 사용하면서 왜 써야하는지 설명을 안해줌.. 놀라움


1/19
오늘 배운 것 
DTO -> Entity

더 공부할 것
DTO vs Entity
repository, service, entity???? 정확히 뭐야 이게
의존성 자동 주입이 뭐지?
GuestbookRepository를 주입한다?
DTO, JPA, Entity 개념 정리하기 
자주 사용하는 Spring Annotation 정리하기(Builder, Data, Controller, AllArgsConstructor, NoArgsConstructor, Autowired)

1/20
3분 스크럼

현재 진행 상황
챕터 4장의 방명록 프로젝트 구현하고 있음. 정확히는 방명록 목록 처리를 위한 DTO 코드 작성중

이슈
자바 언어 익숙치 않고, 스프링 프레임워크 처음 사용 + DB강의 수강 안해서 책읽는데 모르는 개념이 너무 많음
책읽으면서 모르는 개념 따로 적어놓고 정리할 예정
---------------------------

RedirectAttribute?
addFlashAttribute -> 단 한번만 데이터를 전달하는 용도로 사용됨

예제 따라하면서 자주 사용하는 어노테이션 정리
JPA(Java Persistence API)의 어노테이션
@Entity

Lombok 라이브러리 어노테이션이다!
@Builder:
@AllArgsConstructor: 모든 필드 값을 파라미터로 받는 생성자를 만들어줌
@NoArgsConstructor: 파라미터가 없는 기본 생성자를 만들어줌
@RequiredArgsConstructor: final이나 @NonNull인 필드 값만 파라미터로 받는 생성자를 만들어줌
@Getter/@Setter: 코드가 컴파일 될 때 Getter/Setter 메소드를 생성함
@ToString: 클래스에 선언하면 tostring을 자동으로 생성해줌
@Data: 앞서말한 모든 어노테이션들을 포함하는 어노테이션.

spring.beans.factory annotation
@Autowired

엔티티를 생성한 뒤, 해당 엔티티에 맞는 repositroy interface를 작성한다.

----------------------------
1/21
3분 스크럼했음

- lazy loading vs eager loading?
lazy: FetchType을 Lazy로 명시해줘야함. 모든 엔티티를 가져오는 대신에 필요한 엔티티를 각각 가져옴.
eager: FK쪽의 엔티티를 가져올 때 자동으로 PK 쪽의 엔티티도 가져옴. 모두 가져온다는 것은 때때로 장점이 있지만 성능저하가 일어나기 마련
- @ToString 을 사용할 때는 주의해야함.
ToString은 해당 클래스의 모든 멤버 변수를 출력하기 때문에 연관관계로 지정한 멤버 변수 또한 출력하게됨.
이 경우 연관관계인 멤버 변수를 호출하기 위해서 해당 멤버의 객체 또한 호출하게 되는데, 이때 데이터베이스 연결이 필요하게 됨.
따라서 이런 문제를 해결하기 위해서 지연로딩을 할 때는 ToString을 사용할 때 exclude 속성값으로 연관관계 멤버를 제외시켜줘야함


- 지연 로딩을 기본으로 사용하고, 상황에 맞게 방법을 찾는다.
지연로딩의 경우 하나의 테이블을 이용하는 경우 처리속도가 빠름
그러나 필요한 순간에 쿼리를 실행해야 하기 때문에, 연관 관계가 많으면 그만큼 쿼리 실행 수가 많아짐

@Transactional: 해당 메서드를 하나의 '트랜잭션'으로 처리하라는 의미


#컨트롤러와 서비스
요청과 수행으로 역할을 분리했다고 생각하면 된다.

서비스는 @Service를 꼭 붙여줘야한다.
작성한 서비스는 Contorller에 @Autowired 어노테이션을 사용해서 스프링에 등록시킨다.

#Repository?

#엔티티?
테이블과 매핑될 클래스를 의미한다.
