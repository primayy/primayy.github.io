---

title: "[2021/2/1 ~ 2021/2/19] 베이스 캠프 4~5주차 회고"

date: 2021-02-22

categories: 

  \- basecamp

toc: true

author_profile: true

toc_label: "목차" # toc 이름 설정

toc_icon: "bars" # 아이콘 설정

toc_sticky: false # 마우스 스크롤과 함께 내려갈 것인지 설정

author_profile: true

---



## 베이스캠프 4 ~ 5주차 회고

4주~5주차는 설 연휴를 꼈지만 개발에 집중을 해서 그랬는지 생각보다 짧다고 느껴진 주였다.

4주차 월요일부터 수요일까지는 팀원들과 기능 별로 개발할 업무를 분담했고, 설 연휴부터 본격적으로 개발을 시작했다.

처음에는 그래도 연휴니까 조금은 쉴 수 있겠지? 라고 생각했지만, 개발을 시작해보니 그건 말도 안되는 생각이었다는 것을 알게 되었다. 하하



### 이슈

프로젝트를 진행하면서 겪었던 이슈는 다음과 같다.

1. DateTimeFormat
2. 데이터 모델링 및 데이터베이스
3. http 통신
4. 배포



**우선 DateTimeFormat 때문에 시간을 많이 썼다.**

예를 들어서 관리자 페이지에서 영화 회차를 등록하는 과정에서 회차가 시작하는 시간을 선택했어야 했는데,

`<input type="date">` 로 입력받아서 서버로 보내는 데이터가 LocalDateTime으로 변환되지 않고 String으로 변환되어 들어왔다.

그래서 당연히 서버에서는 타입이 맞지 않는다며 오류를 뿜어냈고 Goo교수님께 여러번 여쭤본 결과, 해당 데이터를 받는 DTO에 변수 타입 위에 @DateTimeFormat을 선언해야 한다는 것을 알게 되었다.

따라서 클라이언트 단에서 입력받는 datetime format "yyyy-MM-dd"로 어노테이션을 선언하니 기존에 의도했던 대로 String이 아니라 datetime으로 온전히 받아올 수 있었다.

추후에 이 부분에 대해서는 따로 정리해서 글을 작성해 볼 생각이다.

**두 번째로 데이터 모델링과 데이터베이스 관련해서 어려움을 겪었다.**

실제로 개발을 시작해보니 팀원들과 작성했던 데이터베이스 테이블 설계와는 다르게 동작해야하는 테이블들이 있었다. 그런 테이블을 최소한으로 수정하거나 또는 수정하지 않고 개발을 하려고하니 점점 코드가 꼬이는 듯한 느낌을 받았다. 그럼에도 불구하고 개발을 끝마친 우리 팀원들... 정말 아주 멋지다.

데이터베이스 관련해서 어려웠던 것은 학부 시절 데이터베이스를 제대로 공부해 본 경험이 없던 것으로부터 비롯되었다.

예를 들어 SQL은 간단하게 사용해 본 경험은 있으나 제대로 이해하고 사용하는 것은 아니었다. 그래서 간단한 쿼리문 같은 경우에는 괜찮았으나 쿼리문이 group by, join과 같이 다른 테이블과 얽혀서 조금만 복잡해져도 실행 결과가 어떻게 되는지 예상하기 어려웠다.

주로 문제가 터지면 인터넷에 검색을 해보면서 문제를 해결했는데 데이터베이스를 공부하지 않았던 것이 이렇게 한스러울수가 없었다..

데이터베이스... 마음먹고 제대로 공부해봐야겠다.

**다음으로 http 통신 관련해서 어려움을 겪었다.**

Spring Controller를 이용해서 클라이언트 단에서 get, post 요청을 처리하는 것은 쉬웠지만 서버 단에서 get, post와 같은 http 요청을 보내는 것이 어려웠다.

무비다판다 서비스에서는 회원가입 또는 영화 예매를 하게 되었을 때, 두레이 웹 훅을 이용해서 사용자에게 알림 메시지를 주도록 기능을 구현했는데 해당 부분을 클라이언트 단의 js가 아니라 서버 단에서 두레이 웹 훅 url로 post 요청을 보내도록 구현했다.

java로 http 요청을 처리하는 것이 처음이라 이번에도 Goo 교수님께 여쭤보며 기능을 구현해봤는데, 생각보다 쉽지 않았다.

처음에는 RestTemplate을 이용해서 postForEntity 메소드를 이용해서 요청을 보내봤으나, 요청의 body에 담겨야 할 memberId가 json으로 파싱되지 않고 단순히 String으로 들어가는 문제가 있었다. 

알고보니 RestTemplate을 이용한 방법은 조만간 deprecated될 예정이었고, WebClient를 이용한 http 통신 방법을 권장한다고 했다.

Goo 교수님께서 알려주신 것처럼 WebClient를 이용하는 방법으로 코드를 수정하여 다행히도 두레이 웹 훅 알림 기능을 구현할 수 있었다.

**마지막으로 배포는 정말... 당황스러웠다.**

우선 개발 서버에서 배포 파일을 실행했을 때 서버가 켜지는 시간이 너무나도 오래 걸렸다.

평균적으로 약 6~7분 정도가 걸렸는데, 배포한 서비스를 테스트하는 과정에서 오류를 찾으면 문제를 해결하는 것이 문제가 아니라 오히려 서버를 재기동시켜야 한다는 사실이 무서울 정도였다.

그리고 개발 서버는 mysql, 로컬에서는 maria-db, h2-console을 이용해서 개발을 했었는데, 이런 차이 때문에도 문제가 있었다.

로컬에서는 잘 작동하는 쿼리문이 개발 서버에서는 작동하지 않는 문제였다.

알고보니 Mysql의 특정 버전부터 sql_mode라는 것이 생겼는데, default로 설정된 모드에서는 group by 쿼리문을 사용했을 때 select로 선택한 데이터 컬럼이 group by에 없으면 오류를 출력하게 되어 있었다. 이 사실을 몰랐기 때문에 문제의 원인을 찾고 해결하기까지 시간이 많이 소요 됐다.



## 마무리

오늘 졸업식이 있어서 시연을 참석하지 못한게 너무 아쉽다.

팀원들의 얘기를 들어보니 시연 한 시간 전에 서버가 실행 안되는 오류가 생겼었다고 하는데 그 자리에 함께 있어주지 못한게 너무나도 미안하다.

그럼에도 불구하고 결국에 문제를 잘 해결해서 시연 발표까지 마친 우리 팀원들! 정말 고맙다 ㅠㅠ...

기술 교육은 이제 절반정도 마쳤으니 이제부터가 본격적인 시작일 것 같다. 

남은 날들은 자리 비우는 일 없이 팀원들에게 도움이 될 수 있는 존재가 될 수 있도록 노력하겠다.

끝!